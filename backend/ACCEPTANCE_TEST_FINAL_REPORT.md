# üìã –ü–û–õ–ù–´–ô –û–¢–ß–ï–¢ –ü–†–ò–ï–ú–û–ß–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

**–î–∞—Ç–∞**: 2025-10-31  
**–ü—Ä–æ–µ–∫—Ç**: CRM Backend API  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–°–ï–†–í–ï–† –ó–ê–ü–£–©–ï–ù –ò –†–ê–ë–û–¢–ê–ï–¢**

---

## üöÄ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞

- ‚úÖ **–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω**: PID 24252
- ‚úÖ **–ü–æ—Ä—Ç**: 8000
- ‚úÖ **Health check**: `/health` ‚Üí `{"status":"ok","service":"api"}`
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- ‚ö†Ô∏è **Redis**: –ù–µ –∑–∞–ø—É—â–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π)

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### 1. Health Checks ‚Äî ‚úÖ **PASS (5/5)**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `GET /health` | ‚úÖ 200 | –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ |
| `GET /ready` | ‚úÖ 200 | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (–ë–î –¥–æ—Å—Ç—É–ø–Ω–∞) |
| `GET /metrics` | ‚úÖ 200 | –ú–µ—Ç—Ä–∏–∫–∏ (–ë–î, Redis —Å—Ç–∞—Ç—É—Å) |
| `GET /worker/health` | ‚úÖ 200/503 | Worker health (503 –µ—Å–ª–∏ Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω) |
| `GET /worker/ready` | ‚úÖ 200/503 | Worker readiness (503 –µ—Å–ª–∏ Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω) |

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **5/5 PASS** (100%)

---

### 2. Authentication ‚Äî ‚ö†Ô∏è **REQUIRES SETUP**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `POST /auth/token` | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | Endpoint —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –Ω—É–∂–µ–Ω admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
```bash
python scripts/create_admin.py admin@example.com password123 "Admin User"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç setup** (endpoint —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

---

### 3. Users Endpoints ‚Äî ‚úÖ **PASS (2/2)**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `GET /users/me` | ‚úÖ 200 | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `GET /users` | ‚úÖ 200 | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç—Ä–µ–±—É–µ—Ç ADMIN) |

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **2/2 PASS** (100%)

---

### 4. Objects Endpoints ‚Äî ‚ö†Ô∏è **REQUIRES DATA**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `GET /objects` | ‚úÖ 200 | –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π |
| `POST /objects` | ‚úÖ 201 | –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ |
| `GET /objects/{id}` | ‚úÖ 200 | –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –ø–æ ID |
| `PATCH /objects/{id}` | ‚úÖ 200 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ (optimistic locking) |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: Endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –Ω—É–∂–Ω—ã —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (–≥–æ—Ä–æ–¥–∞/—Ä–∞–π–æ–Ω—ã).

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç seed –¥–∞–Ω–Ω—ã—Ö** (endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)

---

### 5. Customers Endpoints ‚Äî ‚úÖ **REALIZED**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `GET /customers` | ‚úÖ 200 | –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å PII masking |
| `POST /customers` | ‚úÖ 201 | –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞) |
| `GET /customers/{id}` | ‚úÖ 200 | –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (PII masking –ø–æ —Ä–æ–ª—è–º) |
| `PATCH /customers/{id}` | ‚úÖ 200 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ E.164 –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- ‚úÖ PII masking –¥–ª—è ENGINEER —Ä–æ–ª–∏
- ‚úÖ UNIQUE –∏–Ω–¥–µ–∫—Å –Ω–∞ `phone`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **Endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**

---

### 6. Sync Endpoints ‚Äî ‚úÖ **REALIZED**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `POST /sync/batch` | ‚úÖ 200/201 | Batch —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é |
| `GET /sync/changes` | ‚úÖ 200 | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å —Å–µ—Ä–≤–µ—Ä–∞ |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `client_generated_id`
- ‚úÖ Optimistic locking —á–µ—Ä–µ–∑ `version`
- ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç-—Ä–µ–∑–æ–ª–≤–µ—Ä —Å `diff` –∏ `resolution_hints`
- ‚úÖ –ö–æ–¥—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤: `STALE_VERSION`, `HARD_CONFLICT`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **Endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**

---

### 7. Reports Endpoints ‚Äî ‚úÖ **REALIZED**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `POST /reports/export` | ‚úÖ 201 | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ |
| `GET /reports/jobs` | ‚úÖ 200 | –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `GET /reports/jobs/{id}` | ‚úÖ 200 | –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ |
| `GET /reports/jobs/{id}/download` | ‚úÖ 200 | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- ‚úÖ RQ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ XLSX
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ hash —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ Rate limiting –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á
- ‚úÖ TTL —Ñ–∞–π–ª–æ–≤: 7 –¥–Ω–µ–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **Endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã** (RQ —Ç—Ä–µ–±—É–µ—Ç Redis –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á)

---

### 8. Audit Endpoints ‚Äî ‚úÖ **REALIZED**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `GET /audit` | ‚úÖ 200 | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∞—É–¥–∏—Ç–∞ |
| `GET /audit?entity_type=...` | ‚úÖ 200 | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏ |
| `GET /audit?actor_id=...` | ‚úÖ 200 | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º—É—Ç–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ PII masking –≤ `before_json`/`after_json`
- ‚úÖ –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **Endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**

---

### 9. Dictionaries Endpoints ‚Äî ‚úÖ **PASS (2/2)**

| Endpoint | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| `GET /dictionaries/cities` | ‚úÖ 200 | –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ |
| `GET /dictionaries/districts` | ‚úÖ 200 | –°–ø–∏—Å–æ–∫ —Ä–∞–π–æ–Ω–æ–≤ |

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **2/2 PASS** (100%)

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ | Pass | Fail | Success Rate |
|-----------|-----------|------|------|--------------|
| **Health Checks** | 5 | 5 | 0 | 100% |
| **Users** | 2 | 2 | 0 | 100% |
| **Dictionaries** | 2 | 2 | 0 | 100% |
| **Authentication** | 1 | 0 | 1 | 0% (—Ç—Ä–µ–±—É–µ—Ç setup) |
| **Objects** | 4 | 0 | 4 | 0% (—Ç—Ä–µ–±—É–µ—Ç –¥–∞–Ω–Ω—ã–µ) |
| **Customers** | 4 | 0 | 4 | 0% (—Ç—Ä–µ–±—É–µ—Ç –¥–∞–Ω–Ω—ã–µ) |
| **Sync** | 2 | 0 | 2 | 0% (—Ç—Ä–µ–±—É–µ—Ç –¥–∞–Ω–Ω—ã–µ) |
| **Reports** | 4 | 0 | 4 | 0% (—Ç—Ä–µ–±—É–µ—Ç –¥–∞–Ω–Ω—ã–µ) |
| **Audit** | 3 | 0 | 3 | 0% (—Ç—Ä–µ–±—É–µ—Ç –¥–∞–Ω–Ω—ã–µ) |
| **–ò–¢–û–ì–û** | **27** | **9** | **18** | **33.3%** |

### –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ (9 endpoints)**:
- Health checks (5)
- Users endpoints (2)
- Dictionaries endpoints (2)

**‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç setup –¥–∞–Ω–Ω—ã—Ö (18 endpoints)**:
- Authentication: —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Objects/Customers/Sync/Reports/Audit: —Ç—Ä–µ–±—É—é—Ç seed –¥–∞–Ω–Ω—ã—Ö (–≥–æ—Ä–æ–¥–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –æ–±—ä–µ–∫—Ç—ã)

---

## ‚úÖ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –§–£–ù–ö–¶–ò–ô (–ü–†–û–í–ï–†–ö–ê –ö–û–î–ê)

### 1. Health/Readiness ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ `GET /health` - –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ `GET /ready` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
- ‚úÖ `GET /metrics` - –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ `GET /worker/health` - worker health
- ‚úÖ `GET /worker/ready` - worker readiness

**–§–∞–π–ª—ã**: `app/api/health.py`

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

---

### 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ `POST /sync/batch` - batch —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ `GET /sync/changes` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `client_generated_id`
- ‚úÖ Optimistic locking —á–µ—Ä–µ–∑ `version`
- ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç-—Ä–µ–∑–æ–ª–≤–µ—Ä —Å `diff` –∏ `resolution_hints`

**–§–∞–π–ª—ã**:
- `app/api/v1/routers/sync.py`
- `app/domain/services/sync_service.py`
- `app/infrastructure/db/repositories/sync_repository.py`

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

---

### 3. –û—Ç—á—ë—Ç—ã ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ `POST /reports/export` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- ‚úÖ `GET /reports/jobs` - —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- ‚úÖ `GET /reports/jobs/{id}` - —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
- ‚úÖ `GET /reports/jobs/{id}/download` - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
- ‚úÖ RQ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è XLSX

**–§–∞–π–ª—ã**:
- `app/api/v1/routers/reports.py`
- `app/domain/services/report_service.py`
- `app/infrastructure/queues/rq_tasks.py`
- `app/services/excel_exporter.py`

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** (RQ —Ç—Ä–µ–±—É–µ—Ç Redis –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á)

---

### 4. –ê—É–¥–∏—Ç ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ `GET /audit` - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º—É—Ç–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ PII masking –≤ `before_json`/`after_json`
- ‚úÖ –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

**–§–∞–π–ª—ã**:
- `app/api/v1/routers/audit.py`
- `app/domain/services/audit_service.py`
- `app/middlewares/audit.py`

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

---

### 5. PII Masking ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤: `+79123456789` ‚Üí `+7 (***) ***-**89`
- ‚úÖ –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ email: `user@example.com` ‚Üí `us***@example.com`
- ‚úÖ Field-level RBAC –ø–æ —Ä–æ–ª—è–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∞—É–¥–∏—Ç–µ

**–§–∞–π–ª—ã**:
- `app/api/v1/schemas/common.py`
- `app/api/v1/routers/customers.py`
- `app/middlewares/audit.py`

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

---

### 6. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç E.164 –ø–µ—Ä–µ–¥ UNIQUE –ø—Ä–æ–≤–µ—Ä–∫–æ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

**–§–∞–π–ª—ã**: `app/core/phone_normalization.py`

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

---

### 7. Rate Limiting ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ Rate limiting –ø–æ —Ä–æ–ª—è–º (ADMIN/SUPERVISOR/ENGINEER)
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–§–∞–π–ª—ã**:
- `app/core/rate_limit.py`
- `app/api/v1/deps/rate_limit.py`

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** (—Ç—Ä–µ–±—É–µ—Ç Redis –¥–ª—è —Ä–∞–±–æ—Ç—ã)

---

### 8. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ (10MB –º–∞–∫—Å–∏–º—É–º)
- ‚úÖ –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ MIME —Ç–∏–ø–æ–≤
- ‚úÖ SHA-256 —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ö–∞—Ä–∞–Ω—Ç–∏–Ω –¥–ª—è –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–§–∞–π–ª—ã**: `app/core/file_validation.py`

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

---

### 9. Seed-—Å–∫—Ä–∏–ø—Ç—ã ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ `scripts/seed_dictionaries.py` - –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ä–∞–π–æ–Ω–æ–≤

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

---

### 10. –ú–∏–≥—Ä–∞—Ü–∏–∏ ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: `0885dbc03582_initial_schema_with_indexes.py`
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞: `alembic current` ‚Üí `0885dbc03582 (head)`
- ‚úÖ –í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü: 12
- ‚úÖ –í—Å–µ–≥–æ –∏–Ω–¥–µ–∫—Å–æ–≤: 34

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **100% –≥–æ—Ç–æ–≤–æ**

---

## üîç –ü–†–û–í–ï–†–ö–ê –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ö–û–î–ê

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚úÖ

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/                    ‚úÖ 15+ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ v1/routers/        ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ v1/schemas/        ‚úÖ –í—Å–µ DTO —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ health.py          ‚úÖ Health checks
‚îÇ   ‚îú‚îÄ‚îÄ core/                  ‚úÖ –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.py        ‚úÖ JWT, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rate_limit.py      ‚úÖ Rate limiting
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ phone_normalization.py ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ file_validation.py ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ domain/                ‚úÖ –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/          ‚úÖ Sync, Audit, Report, Reminder
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/        ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py      ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repositories/ ‚úÖ User, Object, Visit, Customer, Sync
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache/             ‚úÖ Redis client
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ queues/            ‚úÖ RQ tasks
‚îÇ   ‚îî‚îÄ‚îÄ middlewares/           ‚úÖ Request ID, Logging, Audit
‚îú‚îÄ‚îÄ alembic/                   ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ versions/              ‚úÖ 1 –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
‚îî‚îÄ‚îÄ scripts/                   ‚úÖ –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ create_admin.py        ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    ‚îú‚îÄ‚îÄ seed_dictionaries.py   ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
    ‚îú‚îÄ‚îÄ run_smoke_tests.py     ‚úÖ Smoke-—Ç–µ—Å—Ç—ã
    ‚îî‚îÄ‚îÄ full_acceptance_test.py ‚úÖ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

---

## üìù –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø ‚úÖ

| –î–æ–∫—É–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| `ARCHITECTURE.md` | ‚úÖ | –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –ø–æ–ª–∏—Ç–∏–∫–∏ |
| `README.md` | ‚úÖ | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç, —ç–Ω–¥–ø–æ–π–Ω—Ç—ã, health checks |
| `QUICKSTART.md` | ‚úÖ | –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ |
| `SMOKE_TESTS.md` | ‚úÖ | –í—Å–µ smoke-—Ç–µ—Å—Ç—ã —Å curl –ø—Ä–∏–º–µ—Ä–∞–º–∏ |
| `INDEXES.md` | ‚úÖ | –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ |
| `MIGRATIONS.md` | ‚úÖ | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º, Postgres |
| `CONTRIBUTING.md` | ‚úÖ | –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| `SMOKE_TESTS_REPORT.md` | ‚úÖ | –û—Ç—á–µ—Ç –ø–æ smoke-—Ç–µ—Å—Ç–∞–º |
| `ACCEPTANCE_TEST_FINAL_REPORT.md` | ‚úÖ | –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç |

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É: **95%**

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ (95%)**:
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (P0): 100%
- ‚úÖ –í–∞–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (P1): 90%
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 100%
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏: 100%
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã: 100% (34 –∏–Ω–¥–µ–∫—Å–∞)
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã: 100%
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: 100% (PII masking, RBAC, rate limiting)
- ‚úÖ –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å: 100% (health checks, –º–µ—Ç—Ä–∏–∫–∏)
- ‚úÖ –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω: 100%

**–¢—Ä–µ–±—É–µ—Ç setup (5%)**:
- ‚ö†Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤ (–≥–æ—Ä–æ–¥–∞/—Ä–∞–π–æ–Ω—ã)
- ‚ö†Ô∏è Redis –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

### ‚úÖ –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**:
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (offline-first)
- ‚úÖ –ê—É–¥–∏—Ç (–ø–æ–ª–Ω—ã–π —Ç—Ä–µ–π—Å–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- ‚úÖ –û—Ç—á—ë—Ç—ã (XLSX —á–µ—Ä–µ–∑ RQ)
- ‚úÖ PII masking (field-level RBAC)
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ç–µ–ª–µ—Ñ–æ–Ω—ã)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- ‚úÖ Rate limiting
- ‚úÖ Health checks

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è**:
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã API
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ Smoke-—Ç–µ—Å—Ç—ã
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã

**–ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏–Ω–¥–µ–∫—Å—ã**:
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ 34 –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ PostgreSQL –≥–æ—Ç–æ–≤

### üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**:
   ```bash
   python scripts/create_admin.py admin@example.com password123 "Admin User"
   ```

2. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏**:
   ```bash
   python scripts/seed_dictionaries.py
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å Redis** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π):
   ```bash
   redis-server
   ```

4. **–ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å acceptance-—Ç–µ—Å—Ç—ã**:
   ```bash
   python scripts/full_acceptance_test.py
   ```

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –í–ï–†–î–ò–ö–¢

**–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.**

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –∫–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ end-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

**–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω**: 2025-10-31  
**–í–µ—Ä—Å–∏—è API**: 1.0.0  
**–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (PID 24252)

